CC=i686-pc-mingw32-g++
#to compile on windows you must place fltk in the same folder as Retro Graphics Toolkit and compile fltk first
CFLAGS= -Ifltk-1.3.2/ -Ikens/ -Ifltk-1.3.2/zlib -I fltk-1.3.2/png -c -Wall -O2 -s -ffunction-sections -fdata-sections -mwindows -fomit-frame-pointer -pipe -Wl,--gc-sections
LDFLAGS= -O2 -s -fomit-frame-pointer -Wl,--as-needed -Wl,--gc-sections
SOURCES=project.cpp main.cpp callbacks_palette.cpp callback_tiles.cpp class_global.cpp global.cpp quant.cpp tilemap.cpp color_convert.cpp errorMsg.cpp class_palette.cpp dither.cpp \
	class_tiles.cpp kens/nemesis.cpp kens/enigma.cpp kens/kosinski.cpp spatial_color_quant.cpp NEUQUANT.cpp \
	classtilemap.cpp palette.cpp zlibwrapper.cpp color_compare.cpp windowinit.cpp tiles_io.cpp savepng.cpp \
	callback_project.cpp callback_tilemap.cpp callback_gui.cpp classChuncks.cpp compressionWrapper.cpp callback_chunck.cpp gui.cpp
OBJECTS=$(SOURCES:.cpp=.o)
LINKER=-Lfltk-1.3.2/lib -s -static-libgcc -static-libstdc++ -lfltk_images -lfltk -lfltk_jpeg -lfltk_png -lfltk_z -mwindows -lole32 -luuid -lcomctl32
EXECUTABLE=RetroGraphicsToolkit.exe

all: $(SOURCES) $(EXECUTABLE)

$(EXECUTABLE): $(OBJECTS) 
	$(CC) $(LDFLAGS) $(OBJECTS) $(LINKER) -o $@

.cpp.o:
	$(CC) $(CFLAGS) $< -o $@
clean:
	rm $(OBJECTS) $(EXECUTABLE)
